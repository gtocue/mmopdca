# =========================================================
# ASSIST_KEY: このファイルは【gateway/templates/asset_management.yaml.j2】に位置するユニットです
# =========================================================
#
# 【概要】
#   このユニットは Asset-Management ドメイン向け Plan-DSL テンプレートを提供します。
#
# 【主な役割】
#   - gateway.adapter.mmop_bridge が Jinja2 で変数を差し込み、Plan YAML を自動生成
#
# 【ルール遵守】
#   1) コメントを残しても mmopdca 側で無害にパースできるよう YAML 形式を守る
#   2) ハードコード値は “TODO: 外部設定へ” を付記
# ---------------------------------------------------------

plan_id:   fm-{{ target.lower() }}-{{ now[:10] }}
owner:     agent@forecast.ai
created:   {{ now }}

# ── Data Section ─────────────────────────────────────────
data:
  source:    "yfinance"
  universe:  ["{{ target }}"]       # ← 1 銘柄のみ
  frequency: "1d"

# ── Dates ────────────────────────────────────────────────
dates:
  train_start: "2020-01-01"         # FIXME: ハードコード → context から可変に
  train_end:   "{{ now[:10] }}"
  predict_horizon: {{ horizon }}

# ── Indicators ───────────────────────────────────────────
indicators:
  moving_averages:
    SMA: { window: 20 }
    EMA: { window: 50 }
  oscillators:
    RSI: { period: 14 }

# ── Models ───────────────────────────────────────────────
models:
  lstm:
    enable: On
    params:
      hidden_size: 64              # TODO: 外部設定へ
      num_layers: 2

# ── Output / Misc ────────────────────────────────────────
output_format: "Parquet"
cost_budget: 50                     # USD 上限
feature_set: "default"
