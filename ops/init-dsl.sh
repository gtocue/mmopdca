################################################################################ ASSIST_KEY: 縲塵ps/init-dsl.sh縲・          竊・繝輔ぃ繧､繝ｫ蜈磯ｭ繝倥ャ繝縺ｯ蠢・★谿九☆縺薙→#   DSL 縺ｨ Checkpoints 縺ｮ荳｡繝・ぅ繝ｬ繧ｯ繝医Μ繧堤｢ｺ螳溘↓菴懈・縺励◆縺・∴縺ｧ縲・#   蜿励￠蜿悶▲縺溷ｼ墓焚・・MD・峨ｒ螳溯｡後☆繧句・騾壹お繝ｳ繝医Μ繝昴う繝ｳ繝医・##   笳・API 繧ｳ繝ｳ繝・リ       窶ｦ CMD ["uvicorn",  "api.main_api:app", ...]#   笳・Worker / Beat 窶ｦ CMD ["celery",   "-A", "core.celery_app:celery_app", ...]##   Alpine slim 邉ｻ縺ｧ逋ｺ逕溘☆繧・窶忖vicorn: not found窶・蝠城｡後ｒ蝗樣∩縺吶ｋ縺溘ａ縲・#   蜈磯ｭ蠑墓焚縺・`uvicorn` 縺ｮ蝣ｴ蜷医・ **python -m uvicorn** 縺ｸ鄂ｮ縺肴鋤縺医※螳溯｡後☆繧九・################################################################################!/usr/bin/env shset -e# 笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏# 0. 螟画焚# 笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏DSL_ROOT="${DSL_ROOT:-/mnt/data/dsl}"CKPT_ROOT="/mnt/checkpoints"# 笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏# 1. DSL / Checkpoints 繝輔か繝ｫ繝謨ｴ蛯・# 笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏echo "[init-dsl] Ensuring DSL directory exists: ${DSL_ROOT}"mkdir -p "${DSL_ROOT}"# 窶ｻ dev 繝｢繝ｼ繝峨〒 1000:1000 繧剃ｽｿ縺・ｴ蜷医・縺ｿ chownchown -R 1000:1000 "${DSL_ROOT}" 2>/dev/null || trueecho "[init-dsl] DSL directory ready."echo "[init-dsl] Ensuring checkpoints directory exists: ${CKPT_ROOT}"mkdir -p "${CKPT_ROOT}"chown -R 1000:1000 "${CKPT_ROOT}" 2>/dev/null || trueecho "[init-dsl] Checkpoints directory ready."# 笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏# 2. CMD 繧貞ｮ溯｡・#    uvicorn 縺縺・python -m 縺ｧ蜻ｼ縺ｳ蜃ｺ縺・# 笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏echo "[init-dsl] Exec $*"case "$1" in  uvicorn)    shift               # 蜈磯ｭ (uvicorn) 繧貞炎髯､    exec python -m uvicorn "$@"    ;;  *)    exec "$@"    ;;esac